# Chapter 1: Welcome to Docker
- Chapter này bao gồm:
  - Giới thiệu Docker là gì
  - Ví dụ: "Hello, World"
  - Giới thiệu về container
  - Docker giải quyết các vấn đề phần mềm mà hầu hết mọi người đều gặp phải như thế nào
  - Khi nào, ở đâu và tại sao nên sử dụng Docker

- Cách thực hành tốt nhất là khi bạn bỏ công sức vào sản phẩm hoặc hệ thống của mình, dù không bắt buộc, để sau này mọi thứ sẽ tốt hơn. Các biện pháp thực hành tốt nhất giúp tăng cường bảo mật, ngăn ngừa xung đột, cải thiện khả năng phục vụ hoặc tăng tuổi thọ. Các biện pháp thực hành tốt nhất thường chi phí trước mắt có thể nhiều. Điều này đặc biệt đúng khi tương lai của hệ thống hoặc sản phẩm không chắc chắn. `Docker` là 1 công cụ giúp việc áp dụng các biện pháp đóng gói, phân phối và sử dụng phần mềm trở nên rẻ và hợp lý hơn. Nó thực hiện điều đó bằng cách cung cấp tầm nhìn hoàn chỉnh cho các container chứa quy trình & công cụ đơn giản để xây dựng và làm việc với chúng
- Nếu bạn đang ở trong 1 nhóm vận hành phần mềm dịch vụ với các yêu cầu mở rộng dynamic requirements, triển khai phần mềm với Docker có thể giúp giảm tác động đến khách hàng. Các container xuất hiện nhanh hơn và tiêu tốn ít tài nguyên hơn so với máy ảo
- Các team lập trình dùng CI/CD (tích hợp và triển khai liên tục) mà kết hợp với Docker, họ sẽ tạo ra được quy trình làm việc rõ ràng, dễ tuỳ chỉnh hơn và đồng thời xây dựng được môi trường test đáng tin cậy hơn. Container test chứa cùng phần mềm với phần mềm thực tế. Kết quả là sự tự tin thay đổi trên PRD cao hơn, kiểm soát thay đổi PRD chặt chẽ hơn & làm nhanh hơn
- Nếu team bạn sử dụng Docker để mô hình hoá ở local, bạn sẽ giảm thời gian onboarding của nhân viên mới & bỏ được những cái không nhất quán. Những môi trường tương tự đó có thể kiểm soát phiên bản bằng phần mềm & được cập nhật khi các yêu cầu về phần mềm thay đổi
- Các những người viết ra phần mềm thường biết cách cài đặt & cấu hình phần mềm của họ với các mặc định hợp lý và các phụ thuộc cần thiết. Nếu bạn viết phần mềm đó với Docker, việc phân phối phần mềm đó với Docker sẽ giúp người dùng của bạn cài đặt và chạy phần mềm dễ dàng hơn. Họ có thể tận dụng cấu hình mặc định và tài liệu trợ giúp mà bạn đưa vào. Nếu bạn sử dụng Docker, bạn có thể thu gọn "Hướng dẫn cài đặt" sản phẩm của mình thành 1 lệnh duy nhất và 1 phụ thuộc di động duy nhất
- Trong khi những người viết ra phần mềm hiểu được sự phụ thuộc, cài đặt & đóng gói, thì quản trị viên hệ thống mới là người hiểu được hệ thống mà phần mềm sẽ chạy. Docker cung cấp một ngôn ngữ biểu cảm để chạy phần mềm trong các container. Ngôn ngữ đó cho phép người quản trị hệ thống đưa cấu hình cụ thể cho môi trường và kiểm soát chặt chẽ quyền truy cập vào tài nguyên hệ thống. Cùng ngôn ngữ đó, kết hợp với quản lý gói tích hợp, công cụ và cơ sở hạ tầng phân phối, giúp triển khai có tính khai báo, có thể lặp lại & đáng tin cậy. Nó thúc đẩy mô hình hệ thống dùng 1 lần, cô lập trạng thái liên tục và các biện pháp thực hành tốt nhất khác giúp quản trị viên hệ thống tập chung vào các hoạt động có giá trị cao hơn
- Ra mắt vào tháng 3/2013, Docker hoạt động với hệ điều hành của bạn để đóng gói, vận chuyển và chạy phần mềm. Bạn có thể coi Docker như 1 nhà cung cấp dịch vụ hậu cần phần mềm giúp bạn tiết kiệm thời gian và tập chung vào các phần cốt lõi. Bạn có thể sử dụng Docker với các ứng dụng mạng như web server, database & mail server và các terminal application gồm trình soạn thảo văn bản, trình biên dịch, công cụ phân tích mạng & scripts. Trong 1 số trường hợp, nó thậm chí còn được sử dụng để chạy các ứng dụng GUI như trình duyệt web và productivity software
- Docker chạy phần mềm Linux trên hầu hết các hệ thống. Docker cho Mac & Windows tích hợp với công nghệ máy ảo (VM) phổ biến để có thể chạy được phần mềm Linux. Nhưng trên máy chủ windows mới, Docker có thể chạy thẳng ứng dụng Windows
- Docker không phải là ngôn ngữ lập trình và cũng không phải là framework để xây dựng phần mềm. Docker là 1 công cụ giúp giải quyết các vấn đề phổ biến như cài đặt, gỡ bỏ, nâng cấp, phân phối, tin cậy và chạy phần mềm. Đây là phần mềm Linux nguồn mở, có nghĩa là bất kỳ ai cũng có thể đóng góp vào đó và nó được hưởng lợi từ nhiều góc nhìn khác nhau. Các công ty thường tài trợ cho việc phát triển các dự án nguồn mở. Trong trường hợp này, Docker Inc. là nhà tài trợ chính

## What is Docker
- Nếu bạn đang cầm cuốn sách này, có lẽ bạn đã nghe nói đến Docker. Docker là dự án mã nguồn mở để xây dựng, vận chuyển và chạy chương trình. Đây là 1 chương trình commandline, một quy trình nền và 1 tập hợp các dịch vụ từ xa có cách tiếp cận hậu cần để giải quyết các vấn đề phần mềm phổ biến & đơn giản hoá trải nghiệm khi bạn cài đặt, chạy, phát hành và gỡ bỏ phần mềm. Nó thực hiện điều này bằng cách sử dụng công nghệ hệ điều hành được gọi là container

### "Hello, World"
- Chủ đề này sẽ dễ học hơn với ví dụ cụ thể. Để giữ đúng tradition, chúng ta sẽ sử dụng "Hello World". Trước khi bắt đầu, hãy tải xuống & cài đặt Docker cho máy của bạn. Hướng dẫn cài đặt chi tiết có trong https://docs .docker.com/install/. Sau khi đã cài đặt Docker & kết nối mạng, hãy mở command và nhập lệnh sau
```
docker run dockerinaction/hello_world
```
- Sau khi bạn làm như vậy, Docker sẽ hoạt động. Nó sẽ bắt đầu tải xuống các component khác nhau và cuối cùng in ra "hello world". Nếu bạn chạy lại, nó sẽ chỉ in ra "hello world". Có 1 số điều đang xảy ra trong ví dụ này và bản thân lệnh cũng có 1 số phần riêng biệt
- Đầu tiên, bạn sử dụng lệnh `docker run`. Điều này cho Docker biết rằng bạn muốn kích hoạt trình tự (theo hình bên dưới) để cài đặt & chạy chương trình bên trong vùng chứa
![docker run](./images/docker-run.png)
- Phần thứ 2 chỉ định chương trình mà bạn muốn Docker chạy trong 1 container. Trong ví dụ này, chương trình đó là `dockerinaction/hello_world`. Đây được gọi là `image` name (hoặc repository). Hiện tại, bạn có thể nghĩ tên image là tên của chương trình bạn muốn cài đặt hoặc chạy. Bản thân image là 1 tập hợp các file và metadata. Metadata đó bao gồm chương trình cụ thể để thực thi và các chi tiết cấu hình có liên quan khác
  - **NOTE** Repository này và 1 số repository khác được tạo ra đặc biệt để hỗ trợ các ví dụ trong cuốn sách này. Đến cuối phần 2, bạn sẽ cảm thấy thoải mái khi xem xét các ví dụ nguồn mở này
- Đầu tiên khi bạn chạy lệnh này, Docker phải tìm xem image `dockerinaction/hello_world` đã được tải xuống hay chưa. Nếu không thể tìm thấy nó trên máy tính của bạn (Vì đó là lần đầu tiên bạn làm với Docker), Docker sẽ gọi đến Docker Hub. *Docker Hub* là 1 public registry provided do Docker Inc. cung cấp. Docker Hub phản hồi Docker đang chạy trên máy của bạn để tìm ra nơi có thể tìm thấy image (dockerinaction/hello_world) và Docker bắt đầu tải xuống
- Sau khi image được cài đặt, Docker tạo 1 container mới và chạy 1 lệnh duy nhất. Trong trường hợp này, lệnh rất đơn giản
```
echo "hello world"
```
- Sau khi lệnh *echo* in "hello world" ra terminal, chương trình sẽ thoát & container được dánh dấu là đã dừng. Hiểu rằng trạng thái của 1 conainer có liên quan trực tiếp đến trạng thái của 1 chương trình chạy duy nhất bên trong container đó. Nếu 1 chương trình đang chạy thì container cũng đang chạy. Nếu chương trình dừng lại, container cũng sẽ dừng lại. Khởi động lại container sẽ chạy lại chương trình
- Khi bạn đưa ra lệnh lần thứ 2, Docker sẽ kiểm tra lại để xem `dockerinaction/hello_world` đã được cài đặt chưa. Lần này nó sẽ tìm thấy image ở trên máy local và có thể xây dựng 1 container khác & thực thi nó ngay lập tức. Chúng tôi muốn nhấn mạnh 1 chi tiết quan trọng. Khi bạn sử dụng `docker run` lần thứ 2, nó sẽ tạo ra 1 container thứ 2 từ cùng 1 repository (Xem hình 1.2 bên dưới). Điều này có nghĩa là nếu bạn sử dụng `docker run` nhiều lần và tạo ra 1 loạt các container, bạn sẽ cần phải có danh sách các container đã tạo & có thể tại 1 thời điểm nào đó xoá chúng. Làm việc với container cũng đơn giản như việc tạo ra chúng và cả 2 chủ đề đều được đề cập trong chương 2
![docker run second](./images/docker-run-1.2.png)
- Chúc mừng, giờ bạn đã trở thành người dùng Docker chính thức. Sử dụng Docker thật dễ dàng. Nhưng nó có thể kiểm tra sự hiểu biết của bạn về ứng dụng bạn đang chạy. Hãy cân nhắc chạy 1 ứng dụng web trong 1 container. Nếu bạn không biết rằng nó là 1 ứng dụng chạy lâu dài lắng nghe inbound network đến cổng TCP 80, bạn có thể không biết chính xác lệnh Docker nào nên được sử dụng để khởi động container đó. Đây là những loại điểm khó khăn mà mọi người gặp phải khi di chuyển sang container
- Mặc dù cuốn sách này không thể đề cập đến nhu cầu của các ứng dụng cụ thể của bạn, nhưng nó xác định các trường hợp sử dụng phổ biến và giúp dạy các mô hình sử dụng Docker có liên quan nhất. Đến cuối phần 1, bạn sẽ có khả năng sử dụng thành thạo container với Docker

### Containers
- Theo truyền thống, các hệ điều hành theo phong cách UNIX đã sử dụng thuật ngữ *jail* để mô tả 1 môi trường runtime đã sửa đổi, giới hạn phạm vi tài nguyên mà 1 chương trình bị *jailed* có thể truy cập. Các tính năng của Jail có từ năm 1979 và đã phát triển kể từ đó. Vào năm 2005, với việc phát hành Solaris 10 và Solaris Containers của Sun, container đã trở thành thuật ngữ được ưa chuộng cho runtime environment. Mục tiêu đã mở rộng từ việc giới hạn phạm vi hệ thống file sang việc cô lập 1 quy trình khỏi tất cả các resources ngoại trừ những nơi được phép rõ ràng
- Sử dụng container đã là một phương pháp tốt nhất trong 1 thời gian dài. Nhưng việc xây dựng container thủ công có thể rất khó khăn và dễ thực hiện sai cách. Thách thức này đã khiến chúng nằm ngoài tầm với 1 số người. Những người khác sử dụng container cấu hình sai sẽ bị ru ngủ trong cảm giác an toàn sai lầm. Đây là 1 vấn đề cần được giải quyết và Docker sẽ giúp. Bất kỳ phần mềm nào chạy bằng Docker đều chạy bên trong 1 container. Docker sử dụng các công cụ chứa hiện có để cung cấp các container nhất quán được xây dựng theo các thông lệ tốt nhất. Điều này giúp tăng cường bảo mật cho mọi người
- Với Docker, người dùng có được container với chi phí thấp hơn nhiều. Chạy ví dụ trong phần 1.1.1 sử dụng container và không yêu cầu bất kỳ kiến thức đặc biệt nào. Khi Docker và các container của nó được cải thiện, bạn sẽ nhận được các tính năng cô lập mới nhất và tuyệt vời nhất. Thay vì theo kịp thế giới phát triển nhanh chóng và đòi hỏi kỹ thuật cao trong việc xây dựng các container mạnh mẽ, bạn có thể để Docker xử lý phần lớn công việc đó cho bạn

### Containers are not virtualization
- Trong thời đại cloud-native này, mọi người có xu hướng nghĩ về máy ảo như các đơn vị triển khai, trong đó triển khai 1 quy trình duy nhất có nghĩa là tạo ra toàn bộ máy ảo được kết nối mạng. Máy ảo cung cấp phần cứng ảo (hoặc phần cứng mà trên đó có thể cài đặt hệ điều hành và các chương trình khác). Chúng mất nhiều thời gian (thường là vài phút) để tạo và đòi hỏi nhiều resource hơn vì chúng chạy toàn bộ hệ điều hành ngoài phần mềm bạn muốn sử dụng. Máy ảo có thể hoạt động tối ưu khi mọi thứ đã sẵn sàng, nhưng độ trễ khi khởi động khiến chúng không phù hợp với các tình huống triển khai tức thời hoặc phản ứng
- Không giống như máy ảo, các container Docker không sử dụng bất kỳ ảo hoá phần cứng nào. Các chương trình chạy bên trong Docker containers interface trực tiếp với hạt nhân (kernel) Linux của máy chủ. Nhiều chương trình có thể chạy độc lập mà không cần chạy hệ điều hành dự phòng hoặc bị chậm trễ do trình tự khởi động đầy đủ. Đây là 1 sự phân biệt quan trọng. Docker không phải là công nghệ ảo hoá phần cứng. Thay vào đó, nó giúp bạn sử dụng công nghệ container đã được tích hợp sẵn trong kernel của bạn
